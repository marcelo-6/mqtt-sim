{
  "schema_version": 1,
  "brokers": [
    {
      "name": "main",
      "host": "localhost",
      "port": 1883
    }
  ],
  "streams": [
    {
      "name": "feed_pump_flow",
      "broker": "main",
      "topic": "pharma/skid-a/pumps/feed-01",
      "interval": 1.0,
      "qos": 1,
      "payload": {
        "kind": "json_fields",
        "fields": [
          {
            "name": "flow_lpm",
            "generator": {
              "kind": "number_random",
              "numeric_type": "float",
              "min": 0.5,
              "max": 4.5,
              "precision": 2
            }
          },
          {
            "name": "state",
            "generator": {
              "kind": "choice",
              "values": ["running", "idle", "fault"]
            }
          }
        ]
      }
    },
    {
      "name": "harvest_pump_flow",
      "broker": "main",
      "topic": "pharma/skid-a/pumps/harvest-01",
      "interval": 1.1,
      "qos": 1,
      "payload": {
        "kind": "json_fields",
        "fields": [
          {
            "name": "flow_lpm",
            "generator": {
              "kind": "number_random",
              "numeric_type": "float",
              "min": 0.2,
              "max": 3.0,
              "precision": 2
            }
          },
          {
            "name": "rpm",
            "generator": {
              "kind": "number_walk",
              "numeric_type": "int",
              "min": 200,
              "max": 1200,
              "step": 100,
              "start": 600
            }
          }
        ]
      }
    },
    {
      "name": "valve_manifold",
      "broker": "main",
      "topic": "pharma/skid-a/valves/manifold",
      "interval": 1.5,
      "retain": true,
      "payload": {
        "kind": "json_fields",
        "fields": [
          {
            "name": "valve_a",
            "generator": {
              "kind": "choice",
              "values": ["open", "closed"]
            }
          },
          {
            "name": "valve_b",
            "generator": {
              "kind": "choice",
              "values": ["open", "closed"]
            }
          },
          {
            "name": "route",
            "generator": {
              "kind": "choice",
              "values": ["feed", "harvest", "cip", "buffer"]
            }
          }
        ]
      }
    },
    {
      "name": "line_pressure",
      "broker": "main",
      "topic": "pharma/skid-a/line/pressure",
      "interval": 0.8,
      "payload": {
        "kind": "json_fields",
        "fields": [
          {
            "name": "pressure_bar",
            "generator": {
              "kind": "number_random",
              "numeric_type": "float",
              "min": 0.8,
              "max": 2.4,
              "precision": 2
            }
          }
        ]
      }
    },
    {
      "name": "transfer_state",
      "broker": "main",
      "topic": "pharma/skid-a/transfer/state-machine",
      "interval": 2.0,
      "retain": true,
      "payload": {
        "kind": "json_fields",
        "fields": [
          {
            "name": "state",
            "generator": {
              "kind": "sequence",
              "values": ["idle", "prime", "transfer", "hold", "complete"]
            }
          },
          {
            "name": "active_recipe",
            "generator": {
              "kind": "choice",
              "values": ["media-a", "buffer-b", "cip-alkaline"]
            }
          }
        ]
      }
    }
  ]
}
